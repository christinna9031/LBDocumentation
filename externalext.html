<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="main.css" />
        <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
        <script src="main.js"></script>
        <title>Extensions | LioranBoard</title>
    </head>
    <body>
        <header>
            <div class="title">
                <h1>LioranBoard Documentation</h1>
            </div>
            <div class="slide">
                <nav class="sidebar" id="sidebar">
                    <div class="scroller">
                        <dl>
                            <dt>
                                <a href="index.html"> About LioranBoard</a>
                            </dt>
                        </dl>

                        <dl>
                            <dt>
                                <a href="setup.html"> Basic Setup</a>
                            </dt>
                        </dl>

                        <dl>
                            <dt>
                                <a href="commands.html"> Commands</a>
                            </dt>
                        </dl>

                        <dl>
                            <dt>
                                <a href="faq.html"> FAQ</a>
                            </dt>
                        </dl>

                        <dl>
                            <dt>
                                <a href="extensions.html"  class="active"> Extensions</a>
                            </dt>
                            <dd>
                                <a class="sub-page" href="lbext.html">LioranBoard</a>
                            </dd>
                            
                            <dd>
                                <a class="sub-page" href="twitchext.html" >Twitch</a>
                            </dd>
                            <dd>
                                <a class="sub-page" href="externalext.html"  class="active">External</a>
                            </dd>
                            <dd>
                                <a href="#pollyTTS">
                                   Text to Speech Polly
                                </a>
                            </dd>
                            <dd>
                                <a href="#Spotify">
                                   Spotify
                                </a>
                            </dd>


                        </dl>

                        <dl>
                            <dt>
                                <a href="troubleshooting.html"> Troubleshooting</a>
                            </dt>
                        </dl>
                        <dl>
                            <dt>
                                <a href="commissions.html"> Commissions</a>
                            </dt>
                        </dl>
                    </div>
                </nav>
            </div>
        </header>

        <div class="wrapper">
            <div class="main">
                <section class="doc-content">
                    <h2>External Extensions</h2>

                   
                <p>Extensions that connect to external apps and services.</p>  
                
                             
                <h3 id="pollyTTS">Text to Speech Polly</h3>
                <p><b>Creator: </b>Christinna<br>
                <b>Download: <a href="https://christinna9031.itch.io/lioranboard-polly-text-to-speech">Itch.io</a></b><br>
            


                <b>Description: </b>

                Text to Speech extension using Amazon Polly service to turn any text into speech. <b>It works in OBS dock, browser source and external browsers.</b>   <br>
                <b>Preview:</b><br><iframe width="420" height="315"
                src="https://www.youtube.com/embed/wazxdYa8XN8?controls=1" allowfullscreen>
                </iframe><br>
                <b>Features:</b>    <br>
         
Text you wish to turn into speech can be sent directly from LioranBoard or your Transmitter (by entering the text or uploading a .txt file). <br>

You can set up your default voice, choosing either neural (more naturally sounding) or standard voice engine. All supported voices can be found <a href="https://docs.aws.amazon.com/polly/latest/dg/voicelist.html" target="_blank">here.</a>  <br> 
You can change pitch, speed and add some effects - you can make it whisper instead of speaking, or use DRC (dynamic range compression).<br>

You can configure a button that will automatically show currently played text. <br>

Playback controls: 
Play and Pause, Skip to Next/Play previous recording, Fast Forward/Backwards, Change Volume, Mute/Unmute.<br><br>
<b>Setup: </b>
<ol>
<li>You need AWS credentials to use this extension. If you do not have an Amazon account, you will need to <a href="https://aws.amazon.com/" target="_blank"> sign up</a> for one. Amazon will ask you to verify your identity by providing your phone number and payment method (credit or debit card, some prepaid cards work too). This is needed because AWS provides many other paid services, although we will be using Polly TTS as a part of their free tier. <br>
 Once you have your account, make sure you <a href="https://aws.amazon.com/activate/"> activated the services</a> and follow the steps <a href="https://aws.amazon.com/blogs/security/wheres-my-secret-access-key/" target="_blank">here</a> to get your credentials. As a safety precaution, you might want to <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/getting-started_create-admin-group.html" target="_blank">create an IAM user</a> and use their credentials instead. <button id="example" onclick="toggle_visibility('awskey')">Show example</button>
 <div id="awskey" style="display: none;"><img src="https://i.imgur.com/UC4cCaR.png" /><br /></div>
 </li>
 <li>Once you have your credentials, install the extension following these <a href="faq.html#installextensions" target="_blank">steps</a>. In your zip folder you should also see img and lib folders: 
    <ul>
    <li>
    Copy and paste the whole lib folder to the same folder where your Transmitter file resides (most likely in lioranboard folder). 
    <button id="example" onclick="toggle_visibility('lblibfolderx')">Show example</button>
    <div id="lblibfolderx" style="display: none;"><img src="https://i.imgur.com/6iMbTd9.png" /><br /></div></li>
    <li>Open the img folder, select all the images and copy them all to <code>lioranboard/LioranBoard Receiver(PC)/image</code> folder. </li>
</ul> 
</li>
<li>
In your Receiver, open the premade deck and click on the cogwheel button - edit commands:
<ul>
<li>aws_key = your Access Key ID (from step 1)</li>
<li>aws_secret = your Secret Access Key (from step 1)</li>
<li>voice = choose your default voice. N means it supports both standard and neural engine, NN means it only supports neural engine.</li>
<li>neural = switch between neural and standard engine</li>
<li>region = choose one closest to your location</li>
<li>button_id = button ID you wish to display currently played text (already pre-configured, do not need to change it)</li>
<li>length = max amount of characters per line, will format the displayed text in your button</li>
</ul>
<li>Refresh your Transmitter and click on Play Short examples button to test your credentials. A yellow notification message will pop up in your Receiver if something isn't set up right (follow its instructions). If your credentials are not accepted, go over the previous steps and refresh the Transmitter again. If you get a yellow message saying "Initialize the extension first", press the cogwheel button.</li>
<li>
If you are using the default LB notification system, you can follow the instructions in the Alternate Master Animator button to connect it to your new TTS extension. (will be released in the next LB version)
<button id="example" onclick="toggle_visibility('lbttsnotif')">Show example</button>
<div id="lbttsnotif" style="display: none;"><img src="https://i.imgur.com/Ib5jHeV.png" /><br /></div></li>
<li>Else you can set up your own TTS button triggers (the included example works for <code>!tts *</code> chat trigger).</li>
 <li>Sending a TTS command: </li>
    <ul>
        <li>type = Speak</li>
        <li>voice = default or select a specific one</li>
        <li>neural = switch between neural and standard engine</li>
        <li>pitch = change pitch (only works with standard engine)</li>
        <li>speed = how fast it should speak</li>
        <li>effect: whispered = whispers the text instead of speaking it (supported only by standard engine) <br>
                    drc = dynamic range compression. Makes it easier to hear in noisy environments. <br>
                    soft = makes the voice sound a bit softer (supported only by standard engine)</li>
        <li>value = text you want it to speak</li>

        </li>
    </ul>


 </ol>
<p>
 <b>Playback Controls</b><br>
 

 <ul><li> Play/Resume - play current recording or resume a currently paused one</li>
    <li>Pause - pause currently played recording</li>
<li>Play Previous - play previous recording</li>
<li>Skip to Next - skip to next recording. If there's a new TTS request in the queue, it will skip to that one instead.</li>
<li>Fast Forward/Backwards - you can choose the amount of seconds</li>
<li>Volume Up/Down - you can choose the increments, default is 10% per button press (only affects the TTS itself)</li>
<li>Mute/Unmute - Mutes/Unmutes your TTS (only affects the TTS itself)</li>
<li>Currently playing button - this button will automatically display a currently played TTS </li>
<button id="example" onclick="toggle_visibility('playbackx')">Show example</button>
<div id="playbackx" style="display: none;"><img src="https://i.imgur.com/TKPq0Mt.png" /><br /></div>
</ul>



<p>
<b>Additional Information</b><br>
All TTS requests are saved in your local storage, so you can safely come back and replay them later even after rebooting your computer. <br> 

Any new TTS request will start automatically playing after the last one finishes - there is an integrated queue system. If you're in the middle of replaying your old TTS recordings and a new request comes in, you can press the Skip to Next button to immediately start playing the new TTS request or wait for your current recording to finish first. 

You can press Clear Playlist button to delete all saved and current recordings in the queue. This will also automatically refresh your Transmitter.

You can send TTS requests from your Transmitter as well, either as text or by uploading a .txt file. This will use your default TTS settings. 

 

<p>
 <b>Important Notes</b><Br>
 Amazon Polly TTS has a <b>monthly limit</b> of 1 million neural and 5 million standard free characters for the first year of use. After that you can either switch to a new account to refresh the free tier or use a different TTS service. Make sure you keep track of what month you're on. More information can be found <a href="https://aws.amazon.com/polly/pricing/" target="_blank">here</a>. <br>

 To not go over the monthly limit (which is extremely generous unless you want it to read books for you), you can set up a <a href="https://console.developers.google.com/apis/api/sheets" target="_blank">budget</a> to track and notify you of any extra costs.  <br>
 
 Do not share your AWS credentials or show them on your stream, as you might get billed if you or someone else accidentally uses any of the paid services. Amazon is quite lenient about this though, so you should be able to get a refund in the event something like this happens. 

            </p>

            <h3 id="Spotify">Spotify</h3>
            <p><b>Creator: </b>Christinna<br>
            <b>Download: <a href="https://christinna9031.itch.io/lioranboard-spotify">Itch.io</a></b><br>
        


            <b>Description: </b>

            Spotify extension for LioranBoard which allows you to display and control your Spotify playback directly from your Stream Deck.</b>   <br>
            <b>Preview:</b><br><iframe width="420" height="315"
            src="https://www.youtube.com/embed/EvPCpGzuypc?controls=1" allowfullscreen>
            </iframe><br>
            <b>Features:</b>    <br>
     
Displays your current track in your OBS overlay, StreamDeck and Transmitter.  <br>

Basic playback controls: Play/Pause, Next/Previous Track, Fast Forward/Backwards, Mute/Unmute, Volume Sliders, Like/Unlike track, Toggle Shuffle.  <br>

Song Request Queue: Adds a new song to the queue (either by its URL or a keyword) and displays the current song request queue in your OBS overlay. Everything updates automatically. There is a command to clear the queue as well.  <br>

Retrieve My Playlists: Retrieves all your (public) playlists and lets you play and cycle through them.  <br>

Search for Playlists by a tag : Retrieves playlists by tag/genre (for example romance, chill, jazz etc.).  <br>

Search for a song by keyword: Can search for a song by its name only or by its name and artist. You can cycle through all the results. <br></p>


<p><b>Prerequisites:</b><br> OBS Websocket 4.9, LioranBoard 1.42 or newer <br></p>
<p><b>Setup:</b>
<p>After downloading the .zip file, place the whole Spotify folder in your <code>lioranboard\LioranBoard Receiver(PC)\Ext</code> folder. Go to your Receiver and install the extension. It shoud automatically copy all the files, add a new deck and create a new Spotify OBS scene. If, for some reason, the image files do not get copied automatically, you can manually move them from the Spotify/img folder to your Receiver/image folder. <b>Unless the extension was not installed properly in the first place, you do not need to press 'Install Extension' button anymore.</b> <br>
As soon as you install the extension, a new browser window should open where you need to <a href="https://christinna9031.github.io/LioranBoard-Files/Spotify_auth.html">authenticate your Spotify account</a>. Follow all the instructions. <br>
Once your Spotify account is successfully linked, it should automatically show currently playing track in 3 separate locations: your Streamdeck, your Spotify scene in OBS and your Spotify tab in Transmitter. The Spotify tab in Transmitter contains some extra information about the current track. <br></p>
<p> <img id="smallimg" src="https://i.imgur.com/02LT9qQ.png" ><b>INIT button</b> <br>
This button should be automatically initiated every time you restart your Transmitter. You can use it 'wake up' your Spotify extension, as it sometimes goes into sleep mode after some period of inactivity (you can also simply tap play in your Spotify player). <br>
Do not modify any commands here. 
Send to extension input fields: <br>
<ul>
<li><code>credentials</code> - credentials you obtained when you <a href="https://christinna9031.github.io/LioranBoard-Files/Spotify_auth.html">authenticated your Spotify account </a></li>
<li><code>refresh_token</code> - refresh token your obtained when you <a href="https://christinna9031.github.io/LioranBoard-Files/Spotify_auth.html">authenticated your Spotify account</a></li>
<li><code>last_track</code> - do not change</li>
<li><code>device_type </code> (optional) - device type you want to control your Spotify playback on. If set to default, it will pick the first one it can find.</li>
<li><code>device_id</code> (optional) - device ID you want to control your Spotify playback on. It should be displayed in your Spotify tab in your Transmitter. Can leavy empty if you do not have multiple devices of the same type.  </li></ul>

<p><b>Basic Playback Controls</b> <br><img id="middleimg" src="https://i.imgur.com/c8VXkkU.png"><p>
    These should be pretty self-explanatory. <br>
    <b>Play:</b> 
    If <code>value</code> is empty, it will simply resume playing your current track. If <code>value</code> is a track/playlist/album URI, it will switch to playing that instead. <br>
    
    <b>Fast forward/backward</b>: <code>value</code> can be adjusted to how many seconds you want to fast forward/backward. </p>
    <p>

  
    <img style="width:8%;border:0px;vertical-align:middle;" src="https://i.imgur.com/traJ855.png">  <b>Add/Remove a track</b><br>
    Adds/Removes a currently playing track from your library. </p>

   <p> <img style="width:5%;border:0px;vertical-align:middle;" src="https://i.imgur.com/iVxGRST.png"> <b>Song Request </B><br>
     Default Twitch Chat trigger is <code>!sr *</code>. The wildcard accepts these formats: <br>
     <ul>
    <li>Spotify URI: <code>!sr spotify:track:4boaU9XaS1g6U1nV4lEsMl </code></li>
    <li>Spotify Link: <code>!sr https://open.spotify.com/track/4boaU9XaS1g6U1nV4lEsMl?si=mK4Bf7JiS0iMyX4kt57Gkg</code></li>
    <li>Keyword (song name only) <code>!sr Kiss from a rose</code></li>
    <li>Keyword (song name + artist name) <code>!sr Kiss from a rose # Seal</code>- artist name must follow the song name and '#' sign</li> 
         </ul>
    <p>Once you initiate the button, the extension will queue up the track in your Spotify player and add its name to a stack called <code>spotify_queue</code> (if the requested track cannot be found, the entry will be set to "error"). The SR button will then trigger another button which will display your current SR queue in your Streamdeck and your OBS overlay. Once Spotify starts playing the requested song, it will be automatically removed from the queue. <br>
        <img style="width:18%;border:0px;vertical-align:middle;" src="https://i.imgur.com/XbJEtvB.png">
    </p>

    <p><img style="width:5%;border:0px;vertical-align:middle;" src="https://i.imgur.com/5OvHX1H.png">  <b>Get My Playlists </b><br>
        This button will retrieve all your playlists (must be made public) and allow you to cycle through them using Previous/Next playlist button. The playlist URIs are by default saved in a spotify_playlists_uri stack. 


        </p>

        <p><img style="width:5%;border:0px;vertical-align:middle;" src="https://i.imgur.com/IWG0wNd.png">  <b>Playlists By Tags </b><br>
        You can search for playlists by tags. Press GET ALL TAGS button to retrieve all possible tags as it needs to be an exact match. You can then use Previous/Next playlist button to cycle through them. The playlist URIs are by default saved in a spotify_playlists_uri stack.  <br> 
        Default chat trigger is <code>!spotify tag *</code>, for example <code>!spotify tag instrumental</code>. 


        </p>

        <p><img style="width:5%;border:0px;vertical-align:middle;" src="https://i.imgur.com/MFcEvP1.png">  <b>Search by Keyword </b><br>
        Allows you to search for a song by its keyword. Default chat trigger is <code>!spotify search *</code> where the wildcard can be these two formats: 
        <ul>
            <li>Keyword (song name only) <code>!sr Kiss from a rose</code></li>
            <li>Keyword (song name + artist name) <code>!sr Kiss from a rose # Seal</code>- artist name must follow the song name and '#' sign</li>   
        </ul>
        <p>This will retrieve a stack called spotify_tracks_uri with all the matching tracks. The first matching track will be automatically queued up. You can use Next Search Result button to cycle through them. 

        </p>

        <p><img style="width:5%;border:0px;vertical-align:middle;" src="https://i.imgur.com/a0HIao5.png">  <b>Clear Queue </b><br>
        Experimental button. Should be able to clear your Spotify queue. If used while you have song requests in your queue, it will clear those as well. 
        This will temporatily mute your Spotify while the queue is being cleared and unmute it as soon as it's finished. <br>
        Note: Spotify does not natively offer this feature, so it might not always work 100%. 


        </p>

        <p><img style="width:12%;border:0px;vertical-align:middle;" src="https://i.imgur.com/mH8m5o9.png">  <b>Previous/Next X tracks </b><br>
            You can adjust this button to be able to go to your previous/next X amount of tracks. Just modify the repeat amount in the button. 

        </p>

     






</ul>


                
             

                
                
   
                
                  
                </section>
            </div>
        </div>
        <script>$(document.links).filter(function() {return this.hostname != window.location.hostname;}).attr('target', '_blank');</script>
    </body>
</html>
